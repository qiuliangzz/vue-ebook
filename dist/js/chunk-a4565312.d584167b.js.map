{"version":3,"sources":["webpack:///./src/views/ebookstore/StoreList.vue?c32f","webpack:///src/views/ebookstore/StoreList.vue","webpack:///./src/views/ebookstore/StoreList.vue?5ec9","webpack:///./src/views/ebookstore/StoreList.vue","webpack:///./src/views/ebookstore/StoreList.vue?7a6f"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","ref","attrs","title","showShelf","on","back","top","onScroll","_l","value","key","index","data","titleText","getCategoryText","btnText","staticRenderFns","StoreListvue_type_script_lang_js_","components","DetailTitle","DetaiTitle","Scroll","Featured","list","total","computed","$t","replace","totalNumber","_this","num","keys_default","forEach","length","methods","getList","_this2","Object","api","then","response","category","$route","query","keyword","filter","item","book","fileName","indexOf","concat","bookstore","$router","go","offsetY","utils","$refs","showShadow","hideShadow","created","categoryText","ebookstore_StoreListvue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_StoreList_vue_vue_type_style_index_0_id_b58ee452_lang_scss_rel_stylesheet_2Fscss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_StoreList_vue_vue_type_style_index_0_id_b58ee452_lang_scss_rel_stylesheet_2Fscss_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"gJAAA,IAAAA,EAAA,WAA0B,IAAAC,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,qBAAgC,CAAAF,EAAA,gBAAqBG,IAAA,QAAAC,MAAA,CAAmBC,MAAAT,EAAAS,MAAAC,WAAA,GAAmCC,GAAA,CAAKC,KAAAZ,EAAAY,QAAiBR,EAAA,UAAeG,IAAA,SAAAD,YAAA,2BAAAE,MAAA,CAA2DK,IAAA,IAASF,GAAA,CAAKG,SAAAd,EAAAc,WAAyBd,EAAAe,GAAAf,EAAA,cAAAgB,EAAAC,EAAAC,GAA6C,OAAAd,EAAA,YAAsBa,IAAAC,EAAAV,MAAA,CAAiBW,KAAAH,EAAAI,UAAApB,EAAAoB,UAAApB,EAAAoB,UAAApB,EAAAqB,gBAAAJ,GAAAK,QAAA,QAAkG,QAClhBC,EAAA,sHCuBAC,EAAA,CACAC,WAAA,CACAC,YAAAC,EAAA,KACAC,SAAA,KACAC,WAAA,MAEAV,KANA,WAOA,OACAW,KAAA,KACAC,MAAA,OAGAC,SAAA,CACAvB,MADA,WAEA,OAAAR,KAAA6B,KAEA7B,KAAA8B,OAAA9B,KAAAgC,GAAA,gBAAAC,QAAA,KAAAjC,KAAAkC,aAGA,MAGAA,YAVA,WAUA,IAAAC,EAAAnC,KACAoC,EAAA,EAIA,OAHMC,IAANrC,KAAA6B,MAAAS,QAAA,SAAAtB,GACAoB,GAAAD,EAAAN,KAAAb,GAAAuB,SAEAH,IAGAI,QAAA,CAEAC,QAFA,WAEA,IAAAC,EAAA1C,KACA2C,OAAAC,EAAA,KAAAD,GAAAE,KAAA,SAAAC,GACAJ,EAAAb,KAAAiB,EAAA5B,UACAwB,EAAAZ,MAAAgB,EAAA5B,KAAAY,MACA,IAAAiB,EAAAL,EAAAM,OAAAC,MAAAF,SACAG,EAAAR,EAAAM,OAAAC,MAAAC,QACA,GAAAH,EAAA,CACA,IAAA/B,EAAAqB,IAAAK,EAAAb,MAAAsB,OACA,SAAAC,GAAA,OAAAA,IAAAL,IACA,GACA7B,EAAAwB,EAAAb,KAAAb,GACA0B,EAAAb,KAAA,GACAa,EAAAb,KAAAb,GAAAE,OACAgC,GAEUb,IAAVK,EAAAb,MAAAsB,OAAA,SAAAnC,GAKA,OAHA0B,EAAAb,KAAAb,GAAA0B,EAAAb,KAAAb,GAAAmC,OACA,SAAAE,GAAA,WAAAA,EAAAC,SAAAC,QAAAL,KAEAR,EAAAb,KAAAb,GAAAuB,OAAA,OAKAnB,gBA3BA,SA2BAJ,GACA,SAAAwC,OAAAb,OAAAc,EAAA,KAAAd,CAAAc,EAAA,KAAAzC,GAAAhB,MAAA,KAAAwD,OACAxD,KAAA6B,KAAAb,GAAAuB,OADA,MAIA5B,KAhCA,WAiCAX,KAAA0D,QAAAC,IAAA,IAEA9C,SAnCA,SAmCA+C,GACAA,EAAAjB,OAAAkB,EAAA,KAAAlB,CAAA,IACA3C,KAAA8D,MAAAtD,MAAAuD,aAEA/D,KAAA8D,MAAAtD,MAAAwD,eAIAC,QAzEA,WA0EAjE,KAAAyC,UACAzC,KAAAmB,UAAAnB,KAAAgD,OAAAC,MAAAiB,eCnGkWC,EAAA,0BCQlWC,EAAgBzB,OAAA0B,EAAA,KAAA1B,CACdwB,EACArE,EACAwB,GACF,EACA,KACA,WACA,MAIegD,EAAA,WAAAF,6CCnBf,IAAAG,EAAAC,EAAA,QAAAC,EAAAD,EAAAE,EAAAH,GAAglBE,EAAG","file":"js/chunk-a4565312.d584167b.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"book-list-wrapper\"},[_c('detail-title',{ref:\"title\",attrs:{\"title\":_vm.title,\"showShelf\":true},on:{\"back\":_vm.back}}),_c('scroll',{ref:\"scroll\",staticClass:\"book-list-scroll-wrapper\",attrs:{\"top\":42},on:{\"onScroll\":_vm.onScroll}},_vm._l((_vm.list),function(value,key,index){return _c('featured',{key:index,attrs:{\"data\":value,\"titleText\":_vm.titleText ? _vm.titleText : _vm.getCategoryText(key),\"btnText\":''}})}),1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!-- 书城列表页 -->\n<template>\n  <div class=\"book-list-wrapper\">\n    <detail-title :title=\"title\" :showShelf=\"true\" @back=\"back\" ref=\"title\"></detail-title>\n    <scroll class=\"book-list-scroll-wrapper\" :top=\"42\" @onScroll=\"onScroll\" ref=\"scroll\">\n      <featured\n        :data=\"value\"\n        :titleText=\"titleText ? titleText : getCategoryText(key)\"\n        :btnText=\"''\"\n        v-for=\"(value, key, index) in list\"\n        :key=\"index\"\n      ></featured>\n    </scroll>\n  </div>\n</template>\n\n<script>\nimport DetailTitle from \"../../components/detail/DetaiTitle\";\nimport Scroll from \"../../components/common/Scroll\";\nimport Featured from \"../../components/home/Featured\";\nimport { realPx } from \"../../utils/utils\";\nimport { list } from \"../../api\";\nimport { categoryList, categoryText } from \"../../utils/bookstore\";\n\nexport default {\n  components: {\n    DetailTitle,\n    Scroll,\n    Featured\n  },\n  data() {\n    return {\n      list: null,\n      total: null\n    };\n  },\n  computed: {\n    title() {\n      if (this.list) {\n        return (\n          this.total && this.$t(\"home.allBook\").replace(\"$1\", this.totalNumber)\n        );\n      } else {\n        return null;\n      }\n    },\n    totalNumber() {\n      let num = 0;\n      Object.keys(this.list).forEach(key => {\n        num += this.list[key].length;\n      });\n      return num;\n    }\n  },\n  methods: {\n    // 获取列表\n    getList() {\n      list().then(response => {\n        this.list = response.data.data;\n        this.total = response.data.total;\n        const category = this.$route.query.category;\n        const keyword = this.$route.query.keyword;\n        if (category) {\n          const key = Object.keys(this.list).filter(\n            item => item === category\n          )[0];\n          const data = this.list[key];\n          this.list = {};\n          this.list[key] = data;\n        } else if (keyword) {\n          // 搜索算法：有keyword的保留，没有的剔除\n          Object.keys(this.list).filter(key => {\n            // 找到keyword包含在fileName中的数组，并且长度大于0，\n            this.list[key] = this.list[key].filter(\n              book => book.fileName.indexOf(keyword) !== -1\n            );\n            return this.list[key].length > 0;\n          });\n        }\n      });\n    },\n    getCategoryText(key) {\n      return `${categoryText(categoryList[key], this)}(${\n        this.list[key].length\n      })`;\n    },\n    back() {\n      this.$router.go(-1);\n    },\n    onScroll(offsetY) {\n      if (offsetY > realPx(42)) {\n        this.$refs.title.showShadow();\n      } else {\n        this.$refs.title.hideShadow();\n      }\n    }\n  },\n  created() {\n    this.getList();\n    this.titleText = this.$route.query.categoryText;\n  }\n};\n</script>\n\n<style lang=\"scss\" rel=\"stylesheet/scss\" scoped>\n@import \"../../assets/styles/global\";\n\n.book-list-wrapper {\n  width: 100%;\n  height: 100%;\n  background: white;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StoreList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StoreList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./StoreList.vue?vue&type=template&id=b58ee452&scoped=true&\"\nimport script from \"./StoreList.vue?vue&type=script&lang=js&\"\nexport * from \"./StoreList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./StoreList.vue?vue&type=style&index=0&id=b58ee452&lang=scss&rel=stylesheet%2Fscss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b58ee452\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StoreList.vue?vue&type=style&index=0&id=b58ee452&lang=scss&rel=stylesheet%2Fscss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StoreList.vue?vue&type=style&index=0&id=b58ee452&lang=scss&rel=stylesheet%2Fscss&scoped=true&\""],"sourceRoot":""}